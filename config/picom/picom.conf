# picom.conf para versión vgit-c4107
# Config básico con bordes redondos, sombras, fade y blur kernel compatible

# ------------ SOMBRAS ------------
shadow = true;                    # Activa sombras en las ventanas (porque sin sombras no hay flow)
shadow-radius = 12;              # Qué tan difusa es la sombra (más alto = más blur)
shadow-offset-x = -7;            # Desplazamiento horizontal de la sombra (positivo a la derecha)
shadow-offset-y = -7;            # Desplazamiento vertical (positivo hacia abajo)

# ------------ FADING / ANIMACIONES ------------
fading = true;                   # Habilita animaciones de fade al abrir/cerrar ventanas
fade-in-step = 0.03;             # Velocidad de fade-in (más bajo = más lento y suave)
fade-out-step = 0.03;            # Velocidad de fade-out

# ------------ OPACIDAD / TRANSPARENCIA ------------
frame-opacity = 0.5;             # Opacidad de bordes y marcos (0-1)
inactive-opacity = 0.90;         # Opacidad para ventanas inactivas (0.9 = casi opaco)
active-opacity = 0.95;           # Opacidad para ventana activa (ligeramente más visible)

# ------------ BORDES REDONDOS ------------
corner-radius = 8;              # Radio de los bordes redondeados en px
rounded-corners = true;          # Activa bordes redondeados (sin esto no hay magia)

# ------------ BLUR (efecto difuminado) ------------
blur:
{
  method = "dual_kawase";
  size = 9;
  strength = 5;
# default deviation is 0.84
# deviation = false;
};

blur-background = true;          # Aplica blur al fondo de las ventanas
blur-background-frame = true;    # También aplica blur en marcos y bordes
blur-background-fixed = true;    # Mantiene blur fijo en ventanas en movimiento

# ------------ BACKEND / RENDEREADO ------------
backend = "glx";                 # Backend para renderizado (glx es tu mejor amigo aquí)

dithered-present = false;        # Mejora la presentación visual (puede mejorar el tearing)
vsync = true;                    # Sincronización vertical para evitar screen tearing

# ------------ DETECCIÓN AVANZADA ------------
detect-rounded-corners = true;   # Detecta ventanas con bordes redondeados para no romperles el estilo
detect-client-opacity = true;    # Detecta opacidad específica de ventanas
detect-transient = true;         # Detecta ventanas temporales (popups) para tratar distinto
use-damage = true;               # Optimiza repintado solo de lo que cambia (mejora performance)

# ------------ REGLAS PARA VENTANAS ESPECIALES ------------
rules = (
  {
    match = "window_type = 'tooltip'";
    fade = false;                # Los tooltips no se desvanecen para no distraer
    shadow = true;               # Con sombra para que se vean bien
    opacity = 0.75;              # Algo transparentes, para no molestar
    full-shadow = false;         # Sombra simple, sin extra
  },
  {
    match = "window_type = 'dock' || window_type = 'desktop' || _GTK_FRAME_EXTENTS@";
    blur-background = false;     # Sin blur para docks y escritorios (porque no tiene sentido)
  },
  {
    match = "window_type != 'dock'";
    # shader = "my_shader.frag"; # Podés poner shaders personalizados (opcional)
  },
  {
    match = "window_type = 'dock' || window_type = 'desktop'";
    corner-radius = 0;           # Sin bordes redondeados para dock y desktop (se ve feo)
  },
  {
    match = "name = 'Notification' || class_g = 'Conky' || class_g ?= 'Notify-osd' || class_g = 'Cairo-clock' || _GTK_FRAME_EXTENTS@";
    shadow = false;              # Sin sombra para notificaciones y widgets para que no se pasen
  }
);

